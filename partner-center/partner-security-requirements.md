---
title: Требования к безопасности партнеров | Центр партнеров
ms.topic: article
ms.date: 07/18/2019
description: Узнайте о требованиях безопасности для помощников и партнеров, участвующих в программе поставщика облачных решений.
author: isaiahwilliams
ms.author: iswillia
keywords: Azure Active Directory, поставщик облачных решений, программа поставщика облачных решений, CSP, поставщик панели управления, КПВ, многофакторная проверка подлинности, MFA, модель безопасного приложения, защищенная модель приложений, безопасность
ms.localizationpriority: medium
ms.openlocfilehash: 0ce8a8dd5a58d1647c8d9e53dec0d0bbf7fe6592
ms.sourcegitcommit: 5c8ac1b6d29d183d85582d6eb32e37b91dd8c6c1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2019
ms.locfileid: "68313928"
---
# <a name="partner-security-requirements"></a>Требования к безопасности партнеров

**Относится к**

- Все партнеры в программе поставщика облачных решений
  - Прямой счет
  - Косвенный поставщик
  - Косвенный торговый посредник
- Все поставщики панели управления
- Все помощники

Более высокий уровень защиты конфиденциальности и безопасности — наши лучшие приоритеты. Мы понимаем, что наилучшей защитой является предотвращение, и что мы только надежнее, чем наша слабая ссылка. Именно поэтому нам нужно, чтобы все в нашей экосистеме действовали и гарантированно имели соответствующие средства защиты. Для защиты партнеров и клиентов мы представляем набор обязательных требований к безопасности для Advisor, поставщиков панели управления и партнеров, участвующих в программе поставщика облачных решений.

Начиная с 1 августа 2019 все партнеры должны применять многофакторную проверку подлинности для всех пользователей, включая учетные записи служб, в своем клиенте-партнере.

> [!NOTE]
> Настоятельно рекомендуется, чтобы все партнеры, взаимодействующие через облако независимых (21Vianet, правительство США и Германия), работали с этими новыми требованиями к безопасности немедленно. Однако эти партнеры не обязаны отвечать новым требованиям безопасности, действующим 1 августа 2019. Корпорация Майкрософт предоставит дополнительные сведения о применении этих требований безопасности для облаков независимых в будущем.

Термины, связанные с требованиями к безопасности партнеров, добавлены в программу для [поставщика облачных решений](https://go.microsoft.com/fwlink/p/?LinkId=617100). Начиная с 1 августа 2019, все партнеры, участвующие в программе поставщика облачных решений, должны быть соблюдены в соответствии с условиями. Так как он относится к помощникам, будут применяться те же договорные требования.

Партнеры, не реализующие обязательные требования к безопасности, не смогут выполнить инструкцию Transact в программе поставщика облачных решений или управлять клиентами, использующими делегированные права администратора, когда эти требования будут применены. Мы работаем над тем, чтобы установить дату технического применения для требований и уведомлять партнеров по датам с подробными сведениями.

## <a name="what-actions-do-i-need-to-take"></a>Какие действия необходимо предпринять?

Учитывая, что у каждого пользователя есть очень привилегированный участник, необходимо убедиться, что каждый пользователь имеет запрос MFA для каждой отдельной проверки подлинности. Это можно сделать одним из следующих способов.

- Реализация Azure AD Premium и обеспечение применения MFA для каждого пользователя
- Реализация [политик базовой защиты](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)
- Реализация решения стороннего производителя и обеспечение применения MFA для каждого пользователя

> [!IMPORTANT]
> После того, как эти требования технически соблюдены, каждая отдельная проверка подлинности должна иметь запрос MFA. Вы не сможете использовать любую функцию условного доступа, чтобы избежать проверки подлинности с помощью MFA при доступе к коммерческим облачным службам Майкрософт.

### <a name="considerations"></a>Рекомендации

Так как эти требования применяются ко всем пользователям, включая учетные записи служб, в клиенте-партнере необходимо выполнить несколько рекомендаций для обеспечения беспрепятственного развертывания. Эти рекомендации включают определение пользователей в Azure AD, которые не могут выполнять MFA, а также приложения и устройства, используемые в Организации, которые не поддерживают современную проверку подлинности.

Перед выполнением какого-либо действия рекомендуется задать следующее.

#### <a name="do-you-have-an-application-or-device-that-does-not-support-the-use-of-mfa-when-authenticating"></a>У вас есть приложение или устройство, не поддерживающие использование MFA при проверке подлинности?

При применении устаревшей проверки подлинности MFA протоколы, такие как IMAP, POP3, SMTP и т. д., будут заблокированы, так как эти протоколы не поддерживают MFA. Чтобы устранить это ограничение, можно использовать функцию, известную как [пароли приложений](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords) , чтобы убедиться, что приложение или устройство все еще может пройти проверку подлинности. Ознакомьтесь с замечаниями по использованию паролей приложений, описанными [здесь](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords) , чтобы определить, можно ли использовать их в вашей среде.

#### <a name="is-there-a-policy-preventing-any-of-your-users-from-using-their-mobile-devices-while-working"></a>Существует ли политика, запрещающая пользователям использовать свои мобильные устройства во время работы?

Важно определить любую корпоративную политику, которая не позволяет сотрудникам использовать мобильные устройства во время работы, так как это повлияет на то, какое решение MFA будет реализовано. Существуют решения MFA, например, предоставляемые через реализацию [базовых политик](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection), которые позволяют использовать только приложение для проверки подлинности. В случае, если в Организации есть политика, которая не позволяет использовать мобильные устройства, следует рассмотреть возможность приобретения [Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/) для затронутых пользователей или реализовать стороннее решение, которое обеспечивает наиболее подходящую проверку. функцию.

#### <a name="what-automation-or-integration-do-you-have-that-leverages-user-credentials-for-authentication"></a>Какая автоматизация или интеграция использует учетные данные пользователя для проверки подлинности?

Так как требуется применять MFA для каждого пользователя, включая учетные записи служб, в каталоге партнеров любая автоматизация или интеграция, использующие учетные данные пользователя для проверки подлинности, будут затронуты. Поэтому важно определить, какие учетные записи используются в этих ситуациях. Ниже приведен список примеров приложений или служб, которые следует учитывать.

- Панель управления, используемая для подготовки ресурсов от имени клиентов
- Интеграция с любой платформой, используемой для выставления счетов (в соответствии с программой CSP) и поддержки ваших клиентов
- Скрипты PowerShell, использующие команды AZ, AzureRM, Azure AD, MS Online и т. д.

Приведенный выше список не является исчерпывающим. Поэтому важно выполнить полную оценку любого приложения или службы в среде, которая использует учетные данные пользователя для проверки подлинности. Чтобы конкурировать с требованием MFA, следует реализовать рекомендации в [платформе безопасной модели приложений](https://docs.microsoft.com/partner-center/develop/enable-secure-app-model) , где это возможно. Ниже приведены дополнительные ресурсы, которые помогут понять, как можно реализовать платформу безопасной модели приложений.

- [Примеры для .NET в центре партнеров](https://github.com/microsoft/partner-center-dotnet-samples) . Этот репозиторий GitHub содержит примеры, разработанные с помощью .NET, которые демонстрируют, как можно реализовать платформу безопасной модели приложений.
- [Примеры для участников центра партнеров Java](https://github.com/microsoft/partner-center-java-samples) . Этот репозиторий GitHub содержит примеры, разработанные с помощью Java, которые демонстрируют, как можно реализовать платформу безопасной модели приложений.
- Конструктор [партнеров PowerShell — безопасная модель приложений](https://docs.microsoft.com/powershell/partnercenter/secure-app-model) . Эта статья содержит сведения о реализации инфраструктуры защищенных моделей приложений с помощью PowerShell.
- [Сообщество группы руководств по безопасности центра партнеров](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) — это Интернет-сообщество, в котором можно узнать о предстоящих событиях и задать вопросы, которые могут возникнуть.

### <a name="enforcing-mfa-for-all-users"></a>Применение MFA для всех пользователей

В этом разделе рассматривается, как можно использовать [базовые политики защиты](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection) для применения MFA для каждого пользователя, включая учетные записи служб, в клиенте-партнере. Если вы планируете использовать Azure AD Premium, выполните действия, описанные [здесь](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-getstarted).

> [!NOTE]
> Стороннее решение, совместимое с Azure AD, может использоваться для принудительного применения MFA для всех пользователей, включая учетные записи служб. Дополнительные сведения о том, как решение должно быть реализовано, см. в документации поставщика.

Базовые политики защиты — это набор стандартных политик, которые помогают защитить организации от многих распространенных атак. Эти распространенные атаки могут включать распыление паролей, воспроизведение и фишинг. Политики базовой защиты доступны во всех выпусках Azure Active Directory. Корпорация Майкрософт делает эти политики базовой защиты доступными всем, чтобы позволить клиентам и партнерам реализовать лучшие в своем классе рекомендации по безопасности.

Две политики базовой защиты, которые следует включить, описаны в следующей таблице.

|**Политика**| |
|-----|-----|
|**Требовать MFA для администраторов**|При включении политики "требовать MFA для администраторов" Пользователи с ролями администратора должны будут регистрироваться на MFA с помощью приложения для проверки подлинности. После регистрации MFA администраторы должны будут выполнять MFA каждый раз при входе в систему.|
|**Защита конечным пользователем**|Защита конечных пользователей — это основанная на рисках политика защиты на основе рисков, которая защищает всех пользователей в каталоге. Включение этой политики требует, чтобы все пользователи регистрировались для MFA с помощью приложения Authenticator. Пользователи могут игнорировать запрос на регистрацию MFA в течение 14 дней, после чего вход в систему будет заблокирован до регистрации MFA. После регистрации для MFA пользователи будут получать запрос на MFA только во время безопасных попыток входа. Скомпрометированные учетные записи пользователей блокируются до тех пор, пока их пароль не будет сброшен, а события риска не будут отклонены.|

Когда эти политики включены, каждый пользователь сможет использовать Azure MFA с помощью приложения для проверки подлинности без дополнительных затрат.

#### <a name="configure-self-service-password-reset"></a>Настройка самостоятельного сброса пароля

Самостоятельный сброс пароля (SSPR) — это Azure Active Directory функция, которая позволяет пользователям сбрасывать пароли без необходимости обращения в службу поддержки. Прежде чем использовать службу, пользователи должны зарегистрироваться в службе самостоятельного сброса пароля или зарегистрировать их. Во время регистрации пользователь выбирает один или несколько методов проверки подлинности, включенных в Организации.

Если включена политика базовой защиты для [защиты конечных пользователей](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-baseline-protect-end-users) , все скомпрометированные учетные записи пользователей будут заблокированы до тех пор, пока пароль не будет сброшен и события риска не были отклонены. Учитывая это, рекомендуется, чтобы каждый пользователь, являющийся глобальным администратором, выполнил следующие действия для регистрации в SSPR, чтобы они не блокировались.

1. Перейдите на [страницу установки SSPR](https://aka.ms/ssprsetup)
2. Введите имя пользователя и пароль
3. Настройте по крайней мере один из параметров проверки, которые будут использоваться для проверки пользователя при сбросе пароля.  

При компрометации учетной записи администратору необходимо предпринять действия по восстановлению доступа для затронутого пользователя. Дополнительные сведения о том, как разблокировать пользователя, см. в этой [статье](#recovering-compromised-accounts) .

#### <a name="require-mfa-for-admins"></a>Требовать MFA для администраторов

Для групповой политики *обязательное требование MFA для администратора* требуется указать MFA для следующих ролей каталога, которые считаются наиболее привилегированными Azure Active Directory ролями:

- Глобальный администратор
- Администратор SharePoint
- Администратор Exchange
- Администратор условного доступа
- Администратор безопасности
- Администратор службы технической поддержки и администратор паролей
- Администратор выставления счетов
- Администратор пользователей

При включении политики "требовать MFA для администраторов" для регистрации MFA с помощью приложения для проверки подлинности потребуется упомянутая выше девять ролей администратора. Когда регистрация MFA будет завершена, администраторам потребуется выполнить MFA каждый раз, когда они входят в систему.

Если в вашей организации используются эти учетные записи в сценариях или коде, рекомендуется заменить [](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview)их управляемыми удостоверениями.

Чтобы включить эту политику и защитить администраторов, выполните следующие действия.

1. Войдите в **портал Azure** в качестве глобального администратора, администратора безопасности или администратора условного доступа.
2. Перейдите к **Azure Active Directory** > **условному доступу**.
3. В списке политик выберите **Базовая политика: Требовать MFA для администраторов**.
4. Установите **флажок Включить политику** для **немедленного использования политики**.
5. Нажмите кнопку **сохранить**.

> [!WARNING]
> Перед включением этой политики убедитесь, что пользователи не используют устаревшие протоколы проверки подлинности. При реализации этой политики проверка подлинности прежних версий будет заблокирована.

> [!IMPORTANT]
> Существует известная ошибка, которая влияет на возможность подключения к Exchange Online PowerShell с помощью делегированных административных привилегий. Если вы используете этот модуль PowerShell, ознакомьтесь с известными проблемами [Exchange Online PowerShell](#exchange-online-powershell) , прежде чем включать эту политику.

#### <a name="end-user-protection"></a>Защита конечным пользователем

Базовая политика защиты конечных пользователей защищает всех пользователей в каталоге. Включение этой политики требует, чтобы все пользователи регистрировались для Azure MFA в течение 14 дней. После регистрации пользователи будут получать запрос на MFA только во время безопасных попыток входа. Скомпрометированные учетные записи пользователей блокируются до сброса пароля и риска.

Политика базовых **показателей политики: Защита** конечных пользователей предварительно настроена и будет отображаться вверху при переходе к колонке условного доступа в портал Azure.

Чтобы включить эту политику и защитить пользователей:

1. Войдите в **портал Azure** в качестве глобального администратора, администратора безопасности или администратора условного доступа.
2. Перейдите к **Azure Active Directory** > **условному доступу**.
3. В списке политик выберите **Базовая политика: Защита конечным пользователем (Предварительная версия)** .
4. Установите **флажок Включить политику** для **немедленного использования политики**.
5. Нажмите кнопку **сохранить**.

> [!WARNING]
> Перед включением этой политики убедитесь, что пользователи не используют устаревшие протоколы проверки подлинности. При реализации этой политики проверка подлинности прежних версий будет заблокирована.

> [!IMPORTANT]
> Существуют известные проблемы, которые влияют на возможность подключения к Exchange Online PowerShell с помощью делегированных административных привилегий. Если вы используете этот модуль PowerShell, ознакомьтесь с известными проблемами [Exchange Online PowerShell](#exchange-online-powershell) , прежде чем включать эту политику.

## <a name="common-issues"></a>Общие проблемы

### <a name="azure-active-directory"></a>Azure Active Directory

#### <a name="aadsts50076"></a>AADSTS50076

После включения базовых политик может оказаться, что в службе автоматизации или интеграции возникает исключение, подобное приведенному ниже.

    AADSTS50076: Due to a configuration change made by your administrator, or because you moved to a new location, you must use multi-factor authentication to access 'MyApp'.

Причина этого исключения заключается в том, что проверка подлинности с использованием учетных данных пользователя и MFA теперь является обязательной. Чтобы устранить это исключение, необходимо использовать маркер доступа для проверки подлинности. Дополнительные сведения см. в [инструкции по безопасной модели приложений](http://assetsprod.microsoft.com/secure-application-model-guide.pdf) .

>[!IMPORTANT]
>Большинство современных API и модулей PowerShell поддерживают возможность использования маркера доступа для проверки подлинности. Однако в настоящее время эти функции не поддерживаются. Если вам требуется помощь в определении того, поддерживает ли API или модуль PowerShell использование маркера доступа для проверки подлинности, опубликуйте сообщение в сообществе [группы руководств по безопасности центра партнеров](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) .

#### <a name="aadsts700082"></a>AADSTS700082

После реализации платформы безопасной модели приложений существует вероятность получения следующего исключения за 90 дней после создания начального маркера обновления.

    The refresh token has expired due to inactivity. The token was issued on 2019-01-02T09:19:53.5422744Z and was inactive for 90.00:00:00

В отношении Azure Active Directory максимальное время существования маркера обновления составляет 90 дней. Чтобы устранить эту ошибку, необходимо создать и безопасно сохранить новый маркер обновления. Обратите внимание, что токен обновления можно обновить программным способом, так как при каждом запросе на Azure Active Directory для маркера доступа возвращается новый маркер обновления. Можно реализовать соответствующую логику для обновления безопасного маркера обновления до истечения срока его действия.

Дополнительные сведения см. [в разделе настраиваемое время существования маркеров в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) .

### <a name="recovering-compromised-accounts"></a>Восстановление скомпрометированных учетных записей

Для защиты наших клиентов служба учетных данных Майкрософт с утечкой пароля находит общедоступные пары "имя пользователя-пароль". Если они соответствуют одному из наших пользователей, мы поможем защитить эту учетную запись немедленно. Пользователи, идентифицированные как имеющие утечки учетных данных, подтверждают безопасность. Вход пользователей в систему будет заблокирован до тех пор, пока их пароль не будет сброшен.

Пользователи, которым назначена лицензия Azure AD Premium, могут восстановить доступ через самостоятельный сброс пароля (SSPR), если эта возможность включена в каталоге. Пользователи без лицензии уровня "Премиум", которые будут заблокированы, должны обратиться к администратору для выполнения ручного сброса пароля и закрытия события, помеченного как "риск пользователя".

#### <a name="steps-to-unblock-a-user"></a>Действия для разблокировки пользователя

Убедитесь, что пользователь заблокирован политикой, изучив журналы входа пользователя.

1. Администратору необходимо войти в **портал Azure** и выбрать **Azure Active Directory** > **пользователей** > щелкните имя пользователя и перейдите к разделу входы.
2. Чтобы инициировать сброс пароля заблокированного пользователя, администратору необходимо переходить к **Azure Active Directory** > **пользователей, помеченных для риска**
3. Щелкните пользователя, учетная запись которого заблокирована, чтобы просмотреть сведения о недавних действиях входа пользователя.
4. Щелкните сбросить пароль, чтобы назначить временный пароль, который необходимо изменить при следующем входе в систему.
5. Нажмите кнопку Закрыть все события, чтобы сбросить оценку риска для пользователя.

Теперь пользователь может войти в систему, сбросить пароль и получить доступ к приложению.

## <a name="known-issues"></a>Известные проблемы

### <a name="exchange-online-powershell"></a>Exchange Online PowerShell

Если служба MFA включена, партнеры не смогут использовать свои делегированные административные привилегии с Exchange Online PowerShell для выполнения действий с клиентами. Дополнительные сведения об этом ограничении см. [в статье подключение к Exchange Online PowerShell с использованием многофакторной проверки](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/mfa-connect-to-exchange-online-powershell) подлинности.

## <a name="resources-and-support"></a>Ресурсы и поддержка

В [сообществе группы руководств по безопасности центра партнеров](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) можно найти дополнительные ресурсы и узнать о предстоящих событиях, таких как технические часы. Дополнительные сведения о требованиях см. в документе с [часто задаваемыми вопросами](http://assetsprod.microsoft.com/security-requirements-faq.pdf) .
