---
title: Требованиях к безопасности для партнеров | Центр партнеров
ms.topic: article
ms.date: 08/05/2019
description: Сведения о требованиях к безопасности для консультантов и партнеров, участвующих в программе для поставщиков облачных решений.
author: isaiahwilliams
ms.author: iswillia
keywords: Azure Active Directory, поставщик облачных решений, программа поставщика облачных решений, CSP, поставщик панели управления, CPV, многофакторная проверка подлинности, MFA, модель безопасного приложения, безопасность
ms.localizationpriority: medium
ms.openlocfilehash: 40f5ac3e1481c0b630fc7e22e680409b1ca80926
ms.sourcegitcommit: a5d5bd83e20649e9f02d2d82d682f87bb28a0265
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2019
ms.locfileid: "68912649"
---
# <a name="partner-security-requirements"></a><span data-ttu-id="8b60d-104">Требования к безопасности для партнеров</span><span class="sxs-lookup"><span data-stu-id="8b60d-104">Partner Security Requirements</span></span>

<span data-ttu-id="8b60d-105">**Относится к**</span><span class="sxs-lookup"><span data-stu-id="8b60d-105">**Applies to**</span></span>

- <span data-ttu-id="8b60d-106">Всем партнерам в программе для поставщиков облачных решений:</span><span class="sxs-lookup"><span data-stu-id="8b60d-106">All partners in the Cloud Solution Provider program</span></span>
  - <span data-ttu-id="8b60d-107">прямое выставление счетов;</span><span class="sxs-lookup"><span data-stu-id="8b60d-107">Direct bill</span></span>
  - <span data-ttu-id="8b60d-108">непрямой поставщик;</span><span class="sxs-lookup"><span data-stu-id="8b60d-108">Indirect provider</span></span>
  - <span data-ttu-id="8b60d-109">Косвенный торговый посредник</span><span class="sxs-lookup"><span data-stu-id="8b60d-109">Indirect reseller</span></span>
- <span data-ttu-id="8b60d-110">Всем поставщикам панели управления.</span><span class="sxs-lookup"><span data-stu-id="8b60d-110">All Control Panel Vendors</span></span>
- <span data-ttu-id="8b60d-111">Всем консультантам.</span><span class="sxs-lookup"><span data-stu-id="8b60d-111">All Advisors</span></span>

<span data-ttu-id="8b60d-112">Более высокий уровень конфиденциальности и безопасности является одним из наших главных приоритетов.</span><span class="sxs-lookup"><span data-stu-id="8b60d-112">Greater privacy safeguards and security are among our top priorities.</span></span> <span data-ttu-id="8b60d-113">Мы знаем, что лучшая защита — это предотвращение, и что мы не сильнее самого слабого звена.</span><span class="sxs-lookup"><span data-stu-id="8b60d-113">We know that the best defense is prevention and that we are only as strong as our weakest link.</span></span> <span data-ttu-id="8b60d-114">Именно поэтому каждый элемент в нашей экосистеме должен действовать должным образом, обеспечивая надлежащую защиту.</span><span class="sxs-lookup"><span data-stu-id="8b60d-114">That is why we need everyone in our ecosystem to act and ensure they have appropriate security protections in place.</span></span> <span data-ttu-id="8b60d-115">В целях обеспечения защиты для партнеров и клиентов мы вводим набор обязательных требований к безопасности для консультантов, поставщиков панели управления и партнеров, участвующих в программе для поставщиков облачных решений.</span><span class="sxs-lookup"><span data-stu-id="8b60d-115">To help safeguard partners and customers, we’re introducing a set of mandatory security requirements for Advisors, Control Panel Vendors, and partners participating in the Cloud Solution Provider program.</span></span>

<span data-ttu-id="8b60d-116">Начиная с 1 августа 2019 года все партнеры обязаны применять в своем клиенте многофакторную проверку подлинности для всех пользователей, включая учетные записи служб.</span><span class="sxs-lookup"><span data-stu-id="8b60d-116">Starting August 1, 2019 all partners are required to enforce multi-factor authentication for all users, including service accounts, in their partner tenant.</span></span>

> [!NOTE]
> <span data-ttu-id="8b60d-117">Мы настоятельно рекомендуем всем партнерам, осуществляющим операции через национальное облако (21Vianet, US Governmen и Germany), немедленно принять эти новые требования к безопасности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-117">We strongly recommend that all partners transacting through a sovereign cloud (21Vianet, US Government, and Germany) act and adopt these new security requirements immediately.</span></span> <span data-ttu-id="8b60d-118">Однако эти партнеры не обязаны соответствовать новым требованиям к безопасности, вступившим в силу 1 августа 2019 года.</span><span class="sxs-lookup"><span data-stu-id="8b60d-118">However, these partners are not required to meet the new security requirements effective August 1, 2019.</span></span> <span data-ttu-id="8b60d-119">Корпорация Майкрософт предоставит дополнительные сведения о применении этих требований к безопасности для национальных облаков в будущем.</span><span class="sxs-lookup"><span data-stu-id="8b60d-119">Microsoft will provide additional details regarding the enforcement of these security requirements for sovereign clouds in the future.</span></span>

<span data-ttu-id="8b60d-120">Условия, связанные с требованиями к безопасности для партнеров, добавлены в [руководство по работе с программой для поставщиков облачных решений](https://go.microsoft.com/fwlink/p/?LinkId=617100).</span><span class="sxs-lookup"><span data-stu-id="8b60d-120">The terms associated with the partner security requirements have been added to the [Cloud Solution Provider program guide](https://go.microsoft.com/fwlink/p/?LinkId=617100).</span></span> <span data-ttu-id="8b60d-121">Начиная с 1 августа 2019 года все партнеры, участвующие в программе для поставщиков облачных решений, должны соблюдать эти условия.</span><span class="sxs-lookup"><span data-stu-id="8b60d-121">Starting on August 1, 2019 all partners participating in the Cloud Solution Provider program should be in compliance with the terms.</span></span> <span data-ttu-id="8b60d-122">Что касается консультантов, то для них будут действовать те же контрактные требования.</span><span class="sxs-lookup"><span data-stu-id="8b60d-122">As it relates to Advisors the same contractual requirements will be in place.</span></span>

<span data-ttu-id="8b60d-123">Партнеры, которые не выполнят обязательные требования к безопасности, не смогут осуществлять транзакции в программе для поставщиков облачных решений или управлять клиентами, используя делегированные права администратора, после соблюдения этих требований.</span><span class="sxs-lookup"><span data-stu-id="8b60d-123">Partners who do not implement the mandatory security requirements will not be able to transact in the Cloud Solution Provider program or manage customer tenants leveraging delegate admin rights, once these requirements are enforced.</span></span> <span data-ttu-id="8b60d-124">В настоящее время мы устанавливаем дату технического применения этих требований, а после уведомим партнеров о ней, предоставив подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="8b60d-124">We are in the process of establishing a technical enforcement date for the requirements and will notify partners of the date with detailed information.</span></span>

## <a name="what-actions-do-i-need-to-take"></a><span data-ttu-id="8b60d-125">Какие действия необходимо предпринять?</span><span class="sxs-lookup"><span data-stu-id="8b60d-125">What actions do I need to take?</span></span>

<span data-ttu-id="8b60d-126">Учитывая высокий уровень привилегии партнеров, мы должны обеспечить для каждого пользователя появление запроса MFA при выполнении каждой отдельной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-126">Given the highly privileged nature of being a partner we need to ensure that each user has an MFA challenge for every single authentication.</span></span> <span data-ttu-id="8b60d-127">Это можно сделать одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="8b60d-127">This can be accomplished through one of the following ways</span></span>

- <span data-ttu-id="8b60d-128">Реализация Azure AD Premium и обеспечение применения MFA для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="8b60d-128">Implementing Azure AD Premium and ensure that MFA is enforced for each user</span></span>
- <span data-ttu-id="8b60d-129">Реализация [базовых политик защиты](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection).</span><span class="sxs-lookup"><span data-stu-id="8b60d-129">Implementing the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection)</span></span>
- <span data-ttu-id="8b60d-130">Реализация стороннего решения и обеспечение применения MFA для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="8b60d-130">Implementing a third-party solution and ensure MFA is enforced for each user</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b60d-131">После технического применения этих требований каждый раз при выполнении проверки подлинности должен отображаться запрос MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-131">Once these requirements are technically enforced every single authentication must have an MFA challenge.</span></span> <span data-ttu-id="8b60d-132">Вы не сможете с помощью функций условного доступа избежать выполнения проверки подлинности с использованием MFA при доступе к коммерческим облачным службам Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="8b60d-132">You will not be able to use any feature of conditional access to avoid authenticating using MFA when access Microsoft commercial cloud services.</span></span>

### <a name="considerations"></a><span data-ttu-id="8b60d-133">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="8b60d-133">Considerations</span></span>

<span data-ttu-id="8b60d-134">Так как эти требования применяются ко всем пользователям в клиенте партнера, включая учетные записи служб, для обеспечения беспрепятственного развертывания необходимо учитывать несколько факторов.</span><span class="sxs-lookup"><span data-stu-id="8b60d-134">Because these requirements apply to all users, including service accounts, in your partner tenant, there are several considerations that need to be made to ensure a smooth deployment.</span></span> <span data-ttu-id="8b60d-135">К ним относится идентификация пользователей в Azure AD, которые не могут выполнять MFA, а также приложений и устройств вашей организации, которые не поддерживают современную проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-135">These considerations include identifying users in Azure AD that cannot perform MFA, as well as applications and devices used by your organization that do not support modern authentication.</span></span>

<span data-ttu-id="8b60d-136">Перед выполнением каких-либо действий советуем определить следующее:</span><span class="sxs-lookup"><span data-stu-id="8b60d-136">Prior to performing any action, it is recommended that you identify the following</span></span>

#### <a name="do-you-have-an-application-or-device-that-does-not-support-the-use-of-mfa-when-authenticating"></a><span data-ttu-id="8b60d-137">Есть ли у вас приложение или устройство, которое не поддерживает использование MFA при выполнении проверки подлинности?</span><span class="sxs-lookup"><span data-stu-id="8b60d-137">Do you have an application or device that does not support the use of MFA when authenticating?</span></span>

<span data-ttu-id="8b60d-138">При применении устаревшего механизма проверки подлинности MFA использование протоколов, таких как IMAP, POP3, SMTP и т. д., будет заблокировано, так как они не поддерживают MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-138">When you enforce MFA legacy authentication use protocols such as IMAP, POP3, SMTP, etc. will be blocked because these protocols do not support MFA.</span></span> <span data-ttu-id="8b60d-139">Чтобы устранить это ограничение, воспользуйтесь функцией, называемой [пароли приложения](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords), чтобы проверить, можно ли еще выполнять проверку подлинности в приложении или на устройстве.</span><span class="sxs-lookup"><span data-stu-id="8b60d-139">To address this limitation a feature known as [app passwords](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#app-passwords) can be used to ensure the application or device can still authenticate.</span></span> <span data-ttu-id="8b60d-140">Вам следует ознакомиться с советами по использованию паролей приложений, приведенных [в этом разделе](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords), чтобы определить, можно ли использовать их в вашей среде.</span><span class="sxs-lookup"><span data-stu-id="8b60d-140">You should review the considerations for using app passwords documented [here](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-mfasettings#considerations-about-app-passwords) to determine if they can be used in your environment.</span></span>

#### <a name="do-you-have-users-using-office-365-provided-by-licenses-associated-with-your-partner-tenant"></a><span data-ttu-id="8b60d-141">Есть ли у вас пользователи Office 365 с лицензиями, связанными с вашим клиентом партнера?</span><span class="sxs-lookup"><span data-stu-id="8b60d-141">Do you have users using Office 365 provided by licenses associated with your partner tenant?</span></span>

<span data-ttu-id="8b60d-142">Перед реализацией какого-либо решения советуем определить, почему пользователи применяют версию Microsoft Office в вашем клиенте партнера.</span><span class="sxs-lookup"><span data-stu-id="8b60d-142">Prior to implementing any solution, it is recommended that you determine why version of Microsoft Office is being used by users in your partner tenant.</span></span> <span data-ttu-id="8b60d-143">Ознакомьтесь с [инструкциями по выполнению многофакторной проверки подлинности для развертываний Office 365](https://docs.microsoft.com/office365/admin/security-and-compliance/multi-factor-authentication-plan#enable-mfa), прежде чем предпринимать какие-либо действия.</span><span class="sxs-lookup"><span data-stu-id="8b60d-143">Review [plan for multi-factor authentication for Office 365 Deployments](https://docs.microsoft.com/office365/admin/security-and-compliance/multi-factor-authentication-plan#enable-mfa) before taking any action.</span></span> <span data-ttu-id="8b60d-144">Есть вероятность, что у ваших пользователей будут возникать проблемы с подключением таких приложений, как Outlook.</span><span class="sxs-lookup"><span data-stu-id="8b60d-144">There is a chance your users will experience connectivity issues with applications like Outlook.</span></span> <span data-ttu-id="8b60d-145">Перед применением MFA убедитесь, что вы используете Outlook 2013 SP1 или более поздней версии и в вашей организации включена современная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-145">Before enforcing MFA, it important to ensure that Outlook 2013 SP1, or later, is being used and that your organization has modern authentication enabled.</span></span> <span data-ttu-id="8b60d-146">Дополнительные сведения см. в статье [Включение современной проверки подлинности в Exchange Online](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online).</span><span class="sxs-lookup"><span data-stu-id="8b60d-146">See [Enable modern authentication in Exchange Online](https://docs.microsoft.com/exchange/clients-and-mobile-in-exchange-online/enable-or-disable-modern-authentication-in-exchange-online) for more information.</span></span>

<span data-ttu-id="8b60d-147">Чтобы включить современную проверку подлинности для любых устройств под управлением Windows, на которых установлен пакет Microsoft Office 2013, необходимо будет создать два раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="8b60d-147">To enable modern authentication for any devices running Windows, that have Microsoft Office 2013 installed, you will need to create two registry keys.</span></span> <span data-ttu-id="8b60d-148">Дополнительные сведения см. в статье [Enable Modern Authentication for Office 2013 on Windows devices](https://docs.microsoft.com/office365/admin/security-and-compliance/enable-modern-authentication) (Включение современной проверки подлинности для Office 2013 на устройствах с Windows).</span><span class="sxs-lookup"><span data-stu-id="8b60d-148">See [Enable Modern Authentication for Office 2013 on Windows devices](https://docs.microsoft.com/office365/admin/security-and-compliance/enable-modern-authentication).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b60d-149">Если вы включили Azure AD MFA для своих пользователей, а у них есть устройства с Office 2013, которые не поддерживают современную проверку подлинности, они должны будут использовать пароли приложений на этих устройствах.</span><span class="sxs-lookup"><span data-stu-id="8b60d-149">If you have enabled your users for Azure AD MFA and they have any devices running Office 2013 that are not enabled for modern authentication, they will need to use App Passwords on those devices.</span></span> <span data-ttu-id="8b60d-150">Дополнительные сведения о паролях приложений и их использовании см. в следующей статье: [Manage your two-factor verification method settings](https://go.microsoft.com/fwlink/p/?LinkId=528178) (Управление параметрами метода многофакторной проверки подлинности).</span><span class="sxs-lookup"><span data-stu-id="8b60d-150">More information on App Passwords and when/where/how they should be used can be found here: [App Passwords with Azure Multi-Factor Authentication](https://go.microsoft.com/fwlink/p/?LinkId=528178).</span></span>

#### <a name="is-there-a-policy-preventing-any-of-your-users-from-using-their-mobile-devices-while-working"></a><span data-ttu-id="8b60d-151">Существует ли политика, запрещающая вашим пользователям использовать мобильные устройства во время работы?</span><span class="sxs-lookup"><span data-stu-id="8b60d-151">Is there a policy preventing any of your users from using their mobile devices while working?</span></span>

<span data-ttu-id="8b60d-152">Важно определить любую корпоративную политику, запрещающую сотрудникам использовать мобильные устройства во время работы, так как она влияет на тип реализуемого решения MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-152">It is important to identify any corporate policy that prevents employees from using mobile devices while working because it will influence what MFA solution you implement.</span></span> <span data-ttu-id="8b60d-153">Существуют решения MFA, предоставленные путем реализации [базовых политик защиты](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection), которые позволяют использовать только приложение Authenticator для проверки.</span><span class="sxs-lookup"><span data-stu-id="8b60d-153">There are MFA solutions, such as the one provided through the implementation of the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection), that only allow the use of an authenticator app for verification.</span></span> <span data-ttu-id="8b60d-154">Если в вашей организации есть политика, запрещающая использование мобильных устройств, рассмотрите один из следующих вариантов:</span><span class="sxs-lookup"><span data-stu-id="8b60d-154">In the event your organization has a policy that prevent the use of mobile devices, then you should consider one of the following options</span></span>

- <span data-ttu-id="8b60d-155">Развертывание приложения, поддерживающего временные одноразовые пароли (TOTP), которое может работать в защищенной системе.</span><span class="sxs-lookup"><span data-stu-id="8b60d-155">Deploy a time-based one-time base password (TOTP) application that can run on secure system</span></span>
- <span data-ttu-id="8b60d-156">Реализация стороннего решения, применяющего MFA для каждого пользователя в клиенте партнера и обеспечивающего самый подходящий вариант проверки.</span><span class="sxs-lookup"><span data-stu-id="8b60d-156">Implement a third-party solution that enforces MFA for each user in the partner tenant that provides the most appropriate verification option</span></span>
- <span data-ttu-id="8b60d-157">Приобретение лицензий [Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/) для затронутых пользователей.</span><span class="sxs-lookup"><span data-stu-id="8b60d-157">Purchasing [Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/) licenses for the impacted users</span></span>

<span data-ttu-id="8b60d-158">Поддержка использования ключей безопасности FIDO представлена в плане развития для базовых политик защиты.</span><span class="sxs-lookup"><span data-stu-id="8b60d-158">Support for the use of FIDO security keys is on the road map for the baseline protection policies.</span></span> <span data-ttu-id="8b60d-159">После добавления поддержки вы сможете использовать ключи безопасности FIDO для второго фактора проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-159">Once support has been added, you will be able to leverage FIDO security keys for the second factor of authentication.</span></span> <span data-ttu-id="8b60d-160">До тех пор вы не можете использовать приложение Authenticator.</span><span class="sxs-lookup"><span data-stu-id="8b60d-160">Until then you are limited to the use of the Authenticator App.</span></span>

#### <a name="what-automation-or-integration-do-you-have-that-leverages-user-credentials-for-authentication"></a><span data-ttu-id="8b60d-161">Какая автоматизация или интеграция использует учетные данные пользователя для проверки подлинности?</span><span class="sxs-lookup"><span data-stu-id="8b60d-161">What automation or integration do you have that leverages user credentials for authentication?</span></span>

<span data-ttu-id="8b60d-162">Так как требование состоит в принудительном применении MFA для каждого пользователя, включая учетные записи служб, в каталоге партнера будет затронута любая автоматизация или интеграция, которая использует учетные данные пользователя для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-162">Since the requirement is to enforce MFA for each user, including service accounts, in your partner directory any automation or integration that leverages user credentials for authentication will be impacted.</span></span> <span data-ttu-id="8b60d-163">Поэтому важно определить, какие учетные записи используются в данных ситуациях.</span><span class="sxs-lookup"><span data-stu-id="8b60d-163">So, it important that you identify what accounts are being used in these situations.</span></span> <span data-ttu-id="8b60d-164">Ниже приведен список примеров приложений или служб, на которые следует обратить внимание.</span><span class="sxs-lookup"><span data-stu-id="8b60d-164">The following is a list of examples of applications or services that should be considered</span></span>

- <span data-ttu-id="8b60d-165">Панель управления используется для подготовки ресурсов от имени клиентов.</span><span class="sxs-lookup"><span data-stu-id="8b60d-165">Control panel used to provision resources on behalf of your customers</span></span>
- <span data-ttu-id="8b60d-166">Интеграция с любой платформой, которая используется для выставления счетов (так как речь идет о программе CSP) и поддержки ваших клиентов.</span><span class="sxs-lookup"><span data-stu-id="8b60d-166">Integration with any platform that is used for invoicing (as it relates to the CSP program) and supporting your customers</span></span>
- <span data-ttu-id="8b60d-167">Сценарии PowerShell, использующие модули Az, AzureRM, Azure AD, MS Online и т. д.</span><span class="sxs-lookup"><span data-stu-id="8b60d-167">PowerShell scripts that utilize the Az, AzureRM, Azure AD, MS Online, etc. modules</span></span>

<span data-ttu-id="8b60d-168">Приведенный выше список не является исчерпывающим.</span><span class="sxs-lookup"><span data-stu-id="8b60d-168">The above list is not comprehensive.</span></span> <span data-ttu-id="8b60d-169">Поэтому важно выполнить полную оценку любого приложения или службы в вашей среде, которая использует учетные данные пользователя для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-169">So, it important that you perform a complete assessment of any application or service in your environment that leverages user credentials for authentication.</span></span> <span data-ttu-id="8b60d-170">Для применения требования для MFA вы должны по возможности выполнить инструкции, приведенные в статье [Enabling the Secure Application Model framework](https://docs.microsoft.com/partner-center/develop/enable-secure-app-model) (Включение платформы модели безопасных приложений).</span><span class="sxs-lookup"><span data-stu-id="8b60d-170">To contend with the requirement for MFA, you should implement the guidance in the [Secure Application Model framework](https://docs.microsoft.com/partner-center/develop/enable-secure-app-model) where possible.</span></span> <span data-ttu-id="8b60d-171">Ниже приведены дополнительные ресурсы, содержащие сведения о реализации платформы модели безопасных приложений.</span><span class="sxs-lookup"><span data-stu-id="8b60d-171">The following are additional resources that will help you understand how the Secure Application Model framework can be implemented</span></span>

- <span data-ttu-id="8b60d-172">[Partner Center .NET Samples](https://github.com/microsoft/partner-center-dotnet-samples) (Центр партнеров: примеры для .NET). Этот репозиторий GitHub содержит примеры, разработанные с использованием .NET, которые демонстрируют способ реализации платформы модели безопасных приложений.</span><span class="sxs-lookup"><span data-stu-id="8b60d-172">[Partner Center .NET Samples](https://github.com/microsoft/partner-center-dotnet-samples) - This GitHub repository contains samples, developed using .NET, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="8b60d-173">[Partner Center Java Samples](https://github.com/microsoft/partner-center-java-samples) (Центр партнеров: примеры для Java). Этот репозиторий GitHub содержит примеры, разработанные с использованием Java, которые демонстрируют способ реализации платформы модели безопасных приложений.</span><span class="sxs-lookup"><span data-stu-id="8b60d-173">[Partner Center Java Samples](https://github.com/microsoft/partner-center-java-samples) - This GitHub repository contains samples, developed using Java, that will demonstrate how you can implement the Secure Application Model framework.</span></span>
- <span data-ttu-id="8b60d-174">[Secure Application Model](https://docs.microsoft.com/powershell/partnercenter/secure-app-model) (Модель безопасных приложений). Эта статья содержит подробные сведения о реализации платформы модели безопасных приложений с помощью PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8b60d-174">[Partner Center PowerShell - Secure Application Model](https://docs.microsoft.com/powershell/partnercenter/secure-app-model) - This is an article that provides details on how to implement the Secure Application Model framework using PowerShell.</span></span>
- <span data-ttu-id="8b60d-175">[Partner Center Security Guidance Group](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) (Консультативная группа по обеспечению безопасности в Центре партнеров). Это онлайн-сообщество, где вы можете узнать о предстоящих событиях и задать любые вопросы, которые могут у вас возникнуть.</span><span class="sxs-lookup"><span data-stu-id="8b60d-175">[Partner Center Security Guidance Group community](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) - This is online community where you can learn about upcoming events and ask any questions that you might have.</span></span>

### <a name="enforcing-mfa-for-all-users"></a><span data-ttu-id="8b60d-176">Принудительное применение MFA для всех пользователей</span><span class="sxs-lookup"><span data-stu-id="8b60d-176">Enforcing MFA for all users</span></span>

<span data-ttu-id="8b60d-177">В этом разделе рассматривается использование [базовых политик защиты](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection) для принудительного применения MFA для каждого пользователя в клиенте партнера, включая учетные записи служб.</span><span class="sxs-lookup"><span data-stu-id="8b60d-177">This section will cover how you can use the [baseline protection policies](https://docs.microsoft.com/azure/active-directory/conditional-access/concept-baseline-protection) to enforce MFA for each user, including service accounts, in your partner tenant.</span></span> <span data-ttu-id="8b60d-178">Если вы планируете использовать Azure AD Premium, выполните действия, описанные [в этой статье](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-getstarted).</span><span class="sxs-lookup"><span data-stu-id="8b60d-178">If you are planning to use Azure AD Premium, then follow the steps documented [here](https://docs.microsoft.com/azure/active-directory/authentication/howto-mfa-getstarted).</span></span>

> [!NOTE]
> <span data-ttu-id="8b60d-179">Стороннее решение, совместимое с Azure AD, можно использовать для принудительного применения MFA для всех пользователей, включая учетные записи служб.</span><span class="sxs-lookup"><span data-stu-id="8b60d-179">A third-party solution, that is compatible with Azure AD, can be used to enforce MFA for all users, including, service accounts.</span></span> <span data-ttu-id="8b60d-180">Дополнительные сведения о реализации решения см. в документации от поставщика.</span><span class="sxs-lookup"><span data-stu-id="8b60d-180">Refer to the documentation from the vendor for more details on how the solution should be implemented.</span></span>

<span data-ttu-id="8b60d-181">Базовые политики защиты — это набор предопределенных политик, с помощью которых можно защитить организацию от многих распространенных атак.</span><span class="sxs-lookup"><span data-stu-id="8b60d-181">Baseline protection policies are a set of predefined policies that help protect organizations against many common attacks.</span></span> <span data-ttu-id="8b60d-182">К таким распространенным атакам могут относиться распыление паролей, повторное воспроизведение и фишинг.</span><span class="sxs-lookup"><span data-stu-id="8b60d-182">These common attacks can include password spray, replay, and phishing.</span></span> <span data-ttu-id="8b60d-183">Базовые политики защиты доступны во всех выпусках Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b60d-183">Baseline protection policies are available in all editions of Azure Active Directory.</span></span> <span data-ttu-id="8b60d-184">Корпорация Майкрософт сделала эти базовые политики защиты общедоступными, чтобы клиенты и партнеры могли применять самые лучшие методы обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-184">Microsoft is making these baseline protection policies available to everyone to further enable customers and partners to implement best-in-class security practices.</span></span>

<span data-ttu-id="8b60d-185">Две базовые политики защиты, которые мы рекомендуем включить, описаны в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="8b60d-185">The two baseline protection policies that should be enabled are described in the table below.</span></span>

|<span data-ttu-id="8b60d-186">**Политика**</span><span class="sxs-lookup"><span data-stu-id="8b60d-186">**Policy**</span></span>| |
|-----|-----|
|<span data-ttu-id="8b60d-187">**Требовать MFA для администраторов**</span><span class="sxs-lookup"><span data-stu-id="8b60d-187">**Require MFA for admins**</span></span>|<span data-ttu-id="8b60d-188">Включение политики "Требовать MFA для администраторов" требует от администраторов регистрацию для MFA, выполненную с помощью приложения Authenticator.</span><span class="sxs-lookup"><span data-stu-id="8b60d-188">Enabling the Require MFA for admins policy, will require users in the administrator roles to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="8b60d-189">После завершения регистрации MFA каждый раз при входе в систему администраторы должны будут выполнять проверку подлинности MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-189">Once MFA registration is complete, administrators will need to perform MFA every time they sign-in.</span></span>|
|<span data-ttu-id="8b60d-190">**Защита конечных пользователей**</span><span class="sxs-lookup"><span data-stu-id="8b60d-190">**End user protection**</span></span>|<span data-ttu-id="8b60d-191">Защита конечных пользователей — это базовая политика защиты MFA на основе рисков, которая обеспечивает защиту всех пользователей в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8b60d-191">End user protection is a risk-based MFA baseline protection policy that protects all users in a directory.</span></span> <span data-ttu-id="8b60d-192">Включение этой политики требует, чтобы все пользователи выполнили регистрацию Azure MFA с помощью приложения Authenticator.</span><span class="sxs-lookup"><span data-stu-id="8b60d-192">Enabling this policy requires all users to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="8b60d-193">Пользователи могут игнорировать запрос на регистрацию MFA в течение 14 дней, после чего им будет запрещено входить в систему, пока они не зарегистрируются для MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-193">Users can ignore the MFA registration prompt for 14 days, after which they will be blocked from signing in until they register for MFA.</span></span> <span data-ttu-id="8b60d-194">После регистрации для MFA пользователям будет предложено выполнять MFA только во время попыток рискованного входа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-194">Once registered for MFA, users will be prompted for MFA only during risky sign-in attempts.</span></span> <span data-ttu-id="8b60d-195">Скомпрометированные учетные записи пользователей будут заблокированы до тех пор,пока их пароль не будет сброшен, а события риска не будут отклонены.</span><span class="sxs-lookup"><span data-stu-id="8b60d-195">Compromised user accounts are blocked until their password is reset and risk events have been dismissed.</span></span>|

<span data-ttu-id="8b60d-196">Если эти политики включены, каждый пользователь сможет использовать Azure MFA с помощью приложения Authenticator для проверки без дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="8b60d-196">When these policies are enabled, each user will be able to utilize Azure MFA using the Authenticator App for verification at no additional cost.</span></span>

#### <a name="configure-self-service-password-reset"></a><span data-ttu-id="8b60d-197">Настройка самостоятельного сброса пароля</span><span class="sxs-lookup"><span data-stu-id="8b60d-197">Configure Self Service Password Reset</span></span>

<span data-ttu-id="8b60d-198">Самостоятельный сброс пароля (SSPR) — это функция Azure Active Directory, которая позволяет пользователям сбрасывать свои пароли без обращения в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="8b60d-198">Self-service password reset (SSPR) is an Azure Active Directory feature that enables users to reset their passwords without needing to contact their support team.</span></span> <span data-ttu-id="8b60d-199">Пользователи должны зарегистрироваться для самостоятельного сброса пароля перед использованием службы.</span><span class="sxs-lookup"><span data-stu-id="8b60d-199">Users must register for or be registered for self-service password reset before using the service.</span></span> <span data-ttu-id="8b60d-200">Во время регистрации пользователь выбирает один или несколько методов проверки подлинности, разрешенных в его организации.</span><span class="sxs-lookup"><span data-stu-id="8b60d-200">During registration, the user chooses one or more authentication methods enabled by their organization.</span></span>

<span data-ttu-id="8b60d-201">Если включена базовая политика [Защита конечных пользователей](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-baseline-protect-end-users), любые скомпрометированные учетные записи пользователей будут заблокированы до тех пор, пока их пароль не будет сброшен, а события риска не будут отклонены.</span><span class="sxs-lookup"><span data-stu-id="8b60d-201">When the [End user protection](https://docs.microsoft.com/azure/active-directory/conditional-access/howto-baseline-protect-end-users) baseline protection policy is enabled, any compromised user accounts will be blocked until their password is reset and the risk events have been dismissed.</span></span> <span data-ttu-id="8b60d-202">Учитывая это, рекомендуем, чтобы каждый пользователь, являющийся глобальным администратором, выполнил приведенные ниже действия, чтобы зарегистрироваться для получения SSPR и предотвратить блокировку.</span><span class="sxs-lookup"><span data-stu-id="8b60d-202">Considering this it is recommended that each user, who is a global admin, perform the following to register for SSPR so they do not get locked out.</span></span>

1. <span data-ttu-id="8b60d-203">Перейдите на [страницу установки SSPR](https://aka.ms/ssprsetup).</span><span class="sxs-lookup"><span data-stu-id="8b60d-203">Browse to the [SSPR setup page](https://aka.ms/ssprsetup)</span></span>
2. <span data-ttu-id="8b60d-204">Введите имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="8b60d-204">Enter your username and password</span></span>
3. <span data-ttu-id="8b60d-205">Настройте хотя бы один из вариантов проверок, которые будут использоваться для идентификации при сбросе пароля.</span><span class="sxs-lookup"><span data-stu-id="8b60d-205">Configure at least one of the verifications options that will be used to verify who you are when resetting your password.</span></span>  

<span data-ttu-id="8b60d-206">Если учетная запись была взломана, администратор должен будет восстановить доступ для затронутого пользователя.</span><span class="sxs-lookup"><span data-stu-id="8b60d-206">When an account has been compromised an administrator will need to take action to restore access for the impacted user.</span></span> <span data-ttu-id="8b60d-207">Дополнительные сведения о разблокировке пользователя см. [в этом разделе](#recovering-compromised-accounts).</span><span class="sxs-lookup"><span data-stu-id="8b60d-207">See the [steps to unblock a user](#recovering-compromised-accounts) for details on the process to unblock the user.</span></span>

#### <a name="require-mfa-for-admins"></a><span data-ttu-id="8b60d-208">Требовать MFA для администраторов</span><span class="sxs-lookup"><span data-stu-id="8b60d-208">Require MFA for admins</span></span>

<span data-ttu-id="8b60d-209">Базовая политика *Требовать MFA для администраторов* требует выполнения MFA для указанных ниже ролей каталогов, которые считаются самыми привилегированными ролями Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="8b60d-209">The *Require MFA for admin* baseline policy requires MFA for the following directory roles, considered to be the most privileged Azure Active Directory roles:</span></span>

- <span data-ttu-id="8b60d-210">Глобальный администратор</span><span class="sxs-lookup"><span data-stu-id="8b60d-210">Global administrator</span></span>
- <span data-ttu-id="8b60d-211">Администратор SharePoint.</span><span class="sxs-lookup"><span data-stu-id="8b60d-211">SharePoint administrator</span></span>
- <span data-ttu-id="8b60d-212">Администратор Exchange.</span><span class="sxs-lookup"><span data-stu-id="8b60d-212">Exchange administrator</span></span>
- <span data-ttu-id="8b60d-213">Администратор условного доступа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-213">Conditional access administrator</span></span>
- <span data-ttu-id="8b60d-214">Администратор безопасности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-214">Security administrator</span></span>
- <span data-ttu-id="8b60d-215">Администратор службы поддержки / администратор паролей.</span><span class="sxs-lookup"><span data-stu-id="8b60d-215">Helpdesk administrator / Password administrator</span></span>
- <span data-ttu-id="8b60d-216">Администратор выставления счетов</span><span class="sxs-lookup"><span data-stu-id="8b60d-216">Billing administrator</span></span>
- <span data-ttu-id="8b60d-217">Администратор пользователей.</span><span class="sxs-lookup"><span data-stu-id="8b60d-217">User administrator</span></span>

<span data-ttu-id="8b60d-218">При включении политики "Требовать MFA для администраторов" от указанных выше девяти администраторов потребуется регистрация для MFA, выполненная с помощью приложения Authenticator.</span><span class="sxs-lookup"><span data-stu-id="8b60d-218">Upon enabling the Require MFA for admins policy, the above nine administrator roles will be required to register for MFA using the Authenticator App.</span></span> <span data-ttu-id="8b60d-219">После завершения регистрации MFA каждый раз при входе в систему администраторы должны будут выполнять проверку подлинности MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-219">Once MFA registration is complete, administrators will need to perform MFA every single time they sign-in.</span></span>

<span data-ttu-id="8b60d-220">Если в вашей организации эти учетные записи используются в сценариях или коде, рассмотрите возможность замены их  [управляемыми удостоверениями](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview).</span><span class="sxs-lookup"><span data-stu-id="8b60d-220">If your organization has these accounts in use in scripts or code, consider replacing them with [managed identities](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview).</span></span>

<span data-ttu-id="8b60d-221">Чтобы включить эту политику и обеспечить защиту администраторов, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="8b60d-221">To enable this policy and protect your administrators:</span></span>

1. <span data-ttu-id="8b60d-222">Войдите на  **портал Azure**  в качестве глобального администратора, администратора безопасности или администратора условного доступа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-222">Sign in to the **Azure portal** as a Global Administrator, Security Administrator, or Conditional Access Administrator.</span></span>
2. <span data-ttu-id="8b60d-223">Выберите **Azure Active Directory** > **Условный доступ**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-223">Browse to **Azure Active Directory** > **Conditional Access**.</span></span>
3. <span data-ttu-id="8b60d-224">В списке политик выберите **Baseline policy: Require MFA for admins** (Базовая политика: требовать MFA для администраторов).</span><span class="sxs-lookup"><span data-stu-id="8b60d-224">In the list of policies, select **Baseline policy: Require MFA for admins**.</span></span>
4. <span data-ttu-id="8b60d-225">Для параметра **Включить политику** выберите значение **Использовать политику немедленно**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-225">Set **Enable policy** to **Use policy immediately**.</span></span>
5. <span data-ttu-id="8b60d-226">Щелкните  **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-226">Click **Save**.</span></span>

> [!WARNING]
> <span data-ttu-id="8b60d-227">Перед включением этой политики убедитесь, что ваши пользователи не используют устаревшие протоколы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-227">Before you enable this policy, make sure your users are not using legacy authentication protocols.</span></span> <span data-ttu-id="8b60d-228">Вследствие реализации этой политики устаревший механизм проверки подлинности будет заблокирован.</span><span class="sxs-lookup"><span data-stu-id="8b60d-228">Through the implementation of this policy legacy authentication will be blocked.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b60d-229">Существует известная проблема, которая влияет на вашу возможность подключаться к Exchange Online PowerShell с помощью делегированных прав администратора.</span><span class="sxs-lookup"><span data-stu-id="8b60d-229">There is a known issue, that impacts your ability to connect to Exchange Online PowerShell using delegated administrative privileges.</span></span> <span data-ttu-id="8b60d-230">При использовании модуля PowerShell перед включением этой политики ознакомьтесь с разделом об известной проблеме [Exchange Online PowerShell](#exchange-online-powershell).</span><span class="sxs-lookup"><span data-stu-id="8b60d-230">See the [Exchange Online PowerShell](#exchange-online-powershell) known issue prior to enabling this policy if you using this PowerShell module.</span></span>

#### <a name="end-user-protection"></a><span data-ttu-id="8b60d-231">Защита конечных пользователей</span><span class="sxs-lookup"><span data-stu-id="8b60d-231">End user protection</span></span>

<span data-ttu-id="8b60d-232">Базовая политика "Защита конечных пользователей" обеспечивает защиту всех пользователей в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8b60d-232">The End user protection baseline policy protects all users in a directory.</span></span> <span data-ttu-id="8b60d-233">Включение этой политики требует, чтобы все пользователи выполнили регистрацию Azure MFA в течение 14 дней.</span><span class="sxs-lookup"><span data-stu-id="8b60d-233">Enabling this policy requires all users to register for Azure MFA within 14 days.</span></span> <span data-ttu-id="8b60d-234">После регистрации пользователям будет предложено выполнять MFA только во время попыток рискованного входа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-234">Once registered, users will be prompted for MFA only during risky sign-in attempts.</span></span> <span data-ttu-id="8b60d-235">Скомпрометированные учетные записи пользователей будут заблокированы до тех пор, пока пользователь не сбросит пароль и не отклонит события риска.</span><span class="sxs-lookup"><span data-stu-id="8b60d-235">Compromised user accounts are blocked until password reset and risk dismissal.</span></span>

<span data-ttu-id="8b60d-236">Политика **Baseline policy: End user protection** (Базовая политика: защита конечных пользователей) предварительно настроена. Она будет отображаться при переходе в колонку условного доступа на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="8b60d-236">The policy **Baseline policy: End user protection** comes pre-configured and will show up at the top when you navigate to the Conditional Access blade in Azure portal.</span></span>

<span data-ttu-id="8b60d-237">Чтобы включить эту политику и обеспечить защиту пользователей, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="8b60d-237">To enable this policy and protect your users:</span></span>

1. <span data-ttu-id="8b60d-238">Войдите на  **портал Azure**  в качестве глобального администратора, администратора безопасности или администратора условного доступа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-238">Sign in to the **Azure portal** as a Global Administrator, Security Administrator, or Conditional Access Administrator.</span></span>
2. <span data-ttu-id="8b60d-239">Выберите **Azure Active Directory** > **Условный доступ**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-239">Browse to **Azure Active Directory** > **Conditional Access**.</span></span>
3. <span data-ttu-id="8b60d-240">В списке политик выберите **Baseline policy: End user protection (preview)** (Базовая политика: защита конечных пользователей (предварительная версия)).</span><span class="sxs-lookup"><span data-stu-id="8b60d-240">In the list of policies, select **Baseline policy: End user protection (preview)**.</span></span>
4. <span data-ttu-id="8b60d-241">Для параметра **Включить политику** выберите значение **Использовать политику немедленно**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-241">Set **Enable policy** to **Use policy immediately**.</span></span>
5. <span data-ttu-id="8b60d-242">Щелкните  **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8b60d-242">Click **Save**.</span></span>

> [!WARNING]
> <span data-ttu-id="8b60d-243">Перед включением этой политики убедитесь, что ваши пользователи не используют устаревшие протоколы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-243">Before you enable this policy, make sure your users are not using legacy authentication protocols.</span></span> <span data-ttu-id="8b60d-244">Вследствие реализации этой политики устаревший механизм проверки подлинности будет заблокирован.</span><span class="sxs-lookup"><span data-stu-id="8b60d-244">Through the implementation of this policy legacy authentication will be blocked.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b60d-245">Существуют известные проблемы, влияющие на вашу возможность подключаться к Exchange Online PowerShell с помощью делегированных прав администратора.</span><span class="sxs-lookup"><span data-stu-id="8b60d-245">There is a known issues, that impacts your ability to connect to Exchange Online PowerShell using delegated administrative privileges.</span></span> <span data-ttu-id="8b60d-246">При использовании модуля PowerShell перед включением этой политики ознакомьтесь с разделом об известной проблеме [Exchange Online PowerShell](#exchange-online-powershell).</span><span class="sxs-lookup"><span data-stu-id="8b60d-246">See the [Exchange Online PowerShell](#exchange-online-powershell) known issue prior to enabling this policy if you using this PowerShell module.</span></span>

## <a name="assessing-your-environment"></a><span data-ttu-id="8b60d-247">Оценка среды</span><span class="sxs-lookup"><span data-stu-id="8b60d-247">Assessing your environment</span></span>

<span data-ttu-id="8b60d-248">В соответствии с одним из текущих требований безопасности для партнеров, необходимо принудительно применить MFA для каждого пользователя в клиенте партнера.</span><span class="sxs-lookup"><span data-stu-id="8b60d-248">Through one of the current partner security requirements, you are required to have MFA enforced for each user in your partner tenant.</span></span> <span data-ttu-id="8b60d-249">Так как это требование можно выполнить разными методами, может оказаться трудным определить, требуются ли какие-либо дополнительные действия.</span><span class="sxs-lookup"><span data-stu-id="8b60d-249">Since this requirement can be fulfilled through a number of different methods it can prove difficult to assess if any additional actions are required.</span></span> <span data-ttu-id="8b60d-250">Вы можете воспользоваться такими инструментами, как журналы аудита Azure Active Directory и [Оценка безопасности (Майкрософт)](https://docs.microsoft.com/office365/securitycompliance/microsoft-secure-score), чтобы определить, требуются ли какие-либо дополнительные действия для защиты вашего клиента с помощью MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-250">You can leverage tools like the Azure Active Directory audit logs and [Microsoft Secure Score](https://docs.microsoft.com/office365/securitycompliance/microsoft-secure-score) to evaluate if any additional actions are required to secure your tenant with the MFA.</span></span> <span data-ttu-id="8b60d-251">Корпорация Майкрософт работает над функциональностью Центра партнеров, чтобы обеспечить быструю проверку на соответствие требованиям MFA и модели безопасных приложений.</span><span class="sxs-lookup"><span data-stu-id="8b60d-251">Microsoft is working on an experience in Partner Center to provide a quick compliance check on the MFA and the Secure Application Model requirements.</span></span>

<span data-ttu-id="8b60d-252">Оценка безопасности (Майкрософт) обеспечивает надежную визуализацию, интеграцию с другими продуктами Майкрософт, сравнение собственных оценок с оценками других компаний, фильтрацию по категориям и т. д.</span><span class="sxs-lookup"><span data-stu-id="8b60d-252">Microsoft Secure Score gives you robust visualizations, integration with other Microsoft products, comparison of your score with other companies, filtering by category, and much more.</span></span> <span data-ttu-id="8b60d-253">С помощью этого инструмента вы можете выполнять действия по улучшению безопасности в своей организации и отслеживать историю своих оценок.</span><span class="sxs-lookup"><span data-stu-id="8b60d-253">With this tool, you can complete security improvement actions within your organization and track the history of your score.</span></span> <span data-ttu-id="8b60d-254">Оценка также может отражать реализацию рекомендуемых действий по повышению безопасности сторонними решениями.</span><span class="sxs-lookup"><span data-stu-id="8b60d-254">The score can also reflect when third-party solutions have addressed recommended improvement actions.</span></span>

![Оценка безопасности (Майкрософт)](images/security/secure-score.png)

> [!NOTE]
> <span data-ttu-id="8b60d-256">Действия, выполняемые для улучшения Оценки безопасности (Майкрософт), вступят в силу в течение 24 часов.</span><span class="sxs-lookup"><span data-stu-id="8b60d-256">Actions you can take to improve your Microsoft Secure Score may take up to 24 hours to be reflected.</span></span>

<span data-ttu-id="8b60d-257">Оценка безопасности (Майкрософт) предоставит только числовое представление вашего состояния безопасности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-257">Microsoft Secure Score will only provide a numerical representation of your security posture.</span></span> <span data-ttu-id="8b60d-258">Чтобы точно определить, кто или что выполняет проверку подлинности, избежав появления запроса на выполнение MFA, рекомендуем запросить журналы аудита Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8b60d-258">To better understand what or who is authenticating without being challenged for MFA, it is recommended to query the Azure Active Directory audit logs.</span></span> <span data-ttu-id="8b60d-259">Это можно сделать с помощью модуля [Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview) и приведенного ниже сценария.</span><span class="sxs-lookup"><span data-stu-id="8b60d-259">This can be accomplished using the [Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview) module and the script below.</span></span> <span data-ttu-id="8b60d-260">Он создаст отчет, который предоставит сведения о выполненных за прошедший день попытках проверки подлинности, для которых не было запроса на выполнение MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-260">It will generate a report that provides insight into what authentication attempts have occurred over the past day that were not challenged for MFA.</span></span>

```powershell
Login-AzAccount
$context = Get-AzContext

function Get-SignInEvents
{
    param([string]$userId)

    $content = '{"startDateTime":"' + (Get-Date).AddDays(-1).ToUniversalTime().ToString("yyyy-MM-ddT05:00:00.000Z") + '","endDateTime":"' + (Get-Date).ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ss.fffZ")  + '","userId":"' + $userId +'","riskState":[],"totalRisk":[],"realtimeRisk":[],"tokenIssuerType":[],"isAdfsEnabled":false}'

    $token = [Microsoft.Azure.Commands.Common.Authentication.AzureSession]::Instance.AuthenticationFactory.Authenticate($context.Account, $context.Environment, $context.Tenant.Id, $null, "Never", $null, "74658136-14ec-4630-ad9b-26e160ff0fc6")

    $headers = @{
    'Authorization' = 'Bearer ' + $token.AccessToken
    'Content-Type' = 'application/json'
        'X-Requested-With'= 'XMLHttpRequest'
        'x-ms-client-request-id'= [guid]::NewGuid()
        'x-ms-correlation-id' = [guid]::NewGuid()
    }

    Invoke-RestMethod -Body $content -Header $headers -Method POST -Uri "https://main.iam.ad.ext.azure.com/api/Reports/SignInEventsV3"
}

$report = $()

Get-AzADUser | foreach {
    $events = Get-SignInEvents $_.Id
    $report += $events.Items
}

$report | Where-Object {$_.mfaRequired -eq $false} | Select-Object userPrincipalName, userDisplayName, createdDateTime, resourceDisplayName, loginSucceeded, failureReason, mfaRequired, mfaAuthMethod, mfaAuthDetail, mfaResult, @{Name='policies'; Expression={[string]::join(',', $($_.conditionalAccessPolicies | Select-Object displayName).displayName )}}, conditionalAccessStatus | Export-Csv report.csv
```

<span data-ttu-id="8b60d-261">После запуска приведенного выше сценария сведения будут доступны в файле report.csv.</span><span class="sxs-lookup"><span data-stu-id="8b60d-261">After running the above script, the details will be available in the report.csv file.</span></span> <span data-ttu-id="8b60d-262">Он будет содержать список попыток проверки подлинности, которые произошли за последний день, когда для пользователя не отображался запрос на выполнение MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-262">It will contain a list of authentication attempts that have occurred over the last day where the user was not challenged for MFA.</span></span> <span data-ttu-id="8b60d-263">Вам нужно будет просмотреть каждую запись, определив, является ли такое поведение ожидаемым, и в случае необходимости выполнить надлежащие действия.</span><span class="sxs-lookup"><span data-stu-id="8b60d-263">You will need to review each entry to determine if this is the expected behavior and act if necessary.</span></span>

![Отчет об оценке](images/security/assessment-report.png)

## <a name="common-issues"></a><span data-ttu-id="8b60d-265">Распространенные проблемы</span><span class="sxs-lookup"><span data-stu-id="8b60d-265">Common issues</span></span>

### <a name="azure-active-directory"></a><span data-ttu-id="8b60d-266">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8b60d-266">Azure Active Directory</span></span>

#### <a name="aadsts50076"></a><span data-ttu-id="8b60d-267">AADSTS50076</span><span class="sxs-lookup"><span data-stu-id="8b60d-267">AADSTS50076</span></span>

<span data-ttu-id="8b60d-268">После включения базовых политик вы можете обнаружить, что при автоматизации или интеграции возникает исключение, подобное приведенному ниже.</span><span class="sxs-lookup"><span data-stu-id="8b60d-268">After enabling the baseline policies, you might find that your automation or integration is encountering an exception like the following</span></span>

    AADSTS50076: Due to a configuration change made by your administrator, or because you moved to a new location, you must use multi-factor authentication to access 'MyApp'.

<span data-ttu-id="8b60d-269">Причина появления этого исключения заключается в выполнении проверки подлинности с использованием учетных данных пользователя. В таком случает требуется выполнение MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-269">The reason for this exception is that you are authenticating using user credentials and MFA is now required.</span></span> <span data-ttu-id="8b60d-270">Чтобы устранить это исключение, вам нужно будет использовать маркер доступа для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-270">To address this exception, you will need to utilize an access token for authentication.</span></span> <span data-ttu-id="8b60d-271">Дополнительные сведения см. в [этом руководстве](http://assetsprod.microsoft.com/secure-application-model-guide.pdf).</span><span class="sxs-lookup"><span data-stu-id="8b60d-271">See the [Secure Application Model guide](http://assetsprod.microsoft.com/secure-application-model-guide.pdf) for more information.</span></span>

>[!IMPORTANT]
><span data-ttu-id="8b60d-272">Большинство современных API и модулей PowerShell поддерживают возможность использования маркера доступа для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-272">Most modern APIs and PowerShell modules support the ability to utilize an access token for authentication.</span></span> <span data-ttu-id="8b60d-273">Однако существуют и те, которые в настоящее время не поддерживают эту функцию.</span><span class="sxs-lookup"><span data-stu-id="8b60d-273">However, there are some that currently do not support this functionality.</span></span> <span data-ttu-id="8b60d-274">Если вам нужна помощь, чтобы определить, поддерживает ли используемый API или модуль PowerShell применение маркера доступа для проверки подлинности, опубликуйте соответствующий вопрос в сообществе [Консультативная группа по обеспечению безопасности в Центре партнеров](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance).</span><span class="sxs-lookup"><span data-stu-id="8b60d-274">If you need help determining if the API or PowerShell module you are trying to leverage supports the use of an access token for authentication, then post a message on the [Partner Center Security Guidance Group](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) community.</span></span>

#### <a name="aadsts700082"></a><span data-ttu-id="8b60d-275">AADSTS700082</span><span class="sxs-lookup"><span data-stu-id="8b60d-275">AADSTS700082</span></span>

<span data-ttu-id="8b60d-276">После реализации платформы модели безопасных приложений есть вероятность, что следующее исключение появится через 90 дней после создания начального маркера обновления.</span><span class="sxs-lookup"><span data-stu-id="8b60d-276">Once you have implemented the Secure Application Model framework there is a chance you will receive the following exception 90 days after generating the initial refresh token</span></span>

    The refresh token has expired due to inactivity. The token was issued on 2019-01-02T09:19:53.5422744Z and was inactive for 90.00:00:00

<span data-ttu-id="8b60d-277">Что касается Azure Active Directory, максимальный срок действия маркера обновления составляет 90 дней.</span><span class="sxs-lookup"><span data-stu-id="8b60d-277">With respect to Azure Active Directory the maximum lifetime for a refresh token is 90 days.</span></span> <span data-ttu-id="8b60d-278">Чтобы устранить эту ошибку, создайте маркер обновления и обеспечьте для него надежное хранение.</span><span class="sxs-lookup"><span data-stu-id="8b60d-278">To address this error, you will need to generate and securely store a new refresh token.</span></span> <span data-ttu-id="8b60d-279">Обратите внимание, что обновлять маркер обновления можно программным способом, так как при каждом запросе Azure Active Directory для маркера доступа возвращается новый маркер обновления.</span><span class="sxs-lookup"><span data-stu-id="8b60d-279">Note it is possible to update the refresh token programmatically because with each request to Azure Active Directory for an access token a new refresh token is returned.</span></span> <span data-ttu-id="8b60d-280">Вы можете реализовать соответствующую логику для обновления надежно сохраненного маркера обновления до истечения его срока действия.</span><span class="sxs-lookup"><span data-stu-id="8b60d-280">You can implement the appropriate logic to update the securely stored refresh token before it expires.</span></span>

<span data-ttu-id="8b60d-281">Дополнительные сведения см. в статье [Configurable token lifetimes in Azure Active Directory (Preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) (Настраиваемые сроки действия маркеров в Azure Active Directory (предварительная версия)).</span><span class="sxs-lookup"><span data-stu-id="8b60d-281">See [Configurable token lifetimes in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes) for more information.</span></span>

### <a name="recovering-compromised-accounts"></a><span data-ttu-id="8b60d-282">Восстановление скомпрометированных учетных записей</span><span class="sxs-lookup"><span data-stu-id="8b60d-282">Recovering compromised accounts</span></span>

<span data-ttu-id="8b60d-283">Чтобы защитить наших клиентов, служба отслеживания утечки учетных данных Майкрософт находит общедоступные пары "имя пользователя — пароль".</span><span class="sxs-lookup"><span data-stu-id="8b60d-283">To help protect our customers, Microsoft’s leaked credential service finds publicly available username/password pairs.</span></span> <span data-ttu-id="8b60d-284">Если они соответствуют данным одного из наших пользователей, мы незамедлительно помогаем защитить эту учетную запись.</span><span class="sxs-lookup"><span data-stu-id="8b60d-284">If they match one of our users, we help secure that account immediately.</span></span> <span data-ttu-id="8b60d-285">Пользователи, имеющие утечку учетных данных, являются скомпрометированными.</span><span class="sxs-lookup"><span data-stu-id="8b60d-285">Users identified as having a leaked credential are confirmed compromised.</span></span> <span data-ttu-id="8b60d-286">Вход в систему для этих пользователей будет заблокирован до тех пор, пока их пароль не будет сброшен.</span><span class="sxs-lookup"><span data-stu-id="8b60d-286">These users will be blocked from signing in until their password is reset.</span></span>

<span data-ttu-id="8b60d-287">Пользователи, которым назначена лицензия Azure AD Premium, могут восстановить доступ с помощью самостоятельного сброса пароля (SSPR), если эта возможность включена в их каталоге.</span><span class="sxs-lookup"><span data-stu-id="8b60d-287">Users assigned an Azure AD Premium license can restore access through self-service password reset (SSPR) if the capability is enabled in their directory.</span></span> <span data-ttu-id="8b60d-288">Заблокированные пользователи без лицензии "Премиум" должны связаться с администратором, чтобы выполнить сброс пароля вручную и отклонить событие риска отмеченного пользователя.</span><span class="sxs-lookup"><span data-stu-id="8b60d-288">Users without a premium license that become blocked must contact an administrator to perform a manual password reset and dismiss the flagged user risk event.</span></span>

#### <a name="steps-to-unblock-a-user"></a><span data-ttu-id="8b60d-289">Шаги для разблокировки пользователя</span><span class="sxs-lookup"><span data-stu-id="8b60d-289">Steps to unblock a user</span></span>

<span data-ttu-id="8b60d-290">Изучив журналы входа пользователя, убедитесь, что пользователь был заблокирован политикой.</span><span class="sxs-lookup"><span data-stu-id="8b60d-290">Confirm that the user has been blocked by the policy by examining the user’s sign-in logs.</span></span>

1. <span data-ttu-id="8b60d-291">Администратор должен войти на **портал Azure** и выбрать **Azure Active Directory** > **Пользователи**, затем щелкнуть имя пользователя и перейти к разделу "События входа".</span><span class="sxs-lookup"><span data-stu-id="8b60d-291">An administrator needs to sign in to the **Azure portal** and navigate to **Azure Active Directory** > **Users** > click on the name of the user and navigate to Sign-ins.</span></span>
2. <span data-ttu-id="8b60d-292">Чтобы инициировать сброс пароля для заблокированного пользователя, администратору необходимо выбрать **Azure Active Directory** > **Пользователи, находящиеся в группе риска**</span><span class="sxs-lookup"><span data-stu-id="8b60d-292">To initiate password reset on a blocked user, an administrator needs to navigate to **Azure Active Directory** > **Users flagged for risk**</span></span>
3. <span data-ttu-id="8b60d-293">Щелкните имя пользователя, учетная запись которого заблокирована, чтобы просмотреть сведения о последних действиях входа.</span><span class="sxs-lookup"><span data-stu-id="8b60d-293">Click on the user whose account is blocked to view information about the user’s recent sign-in activity.</span></span>
4. <span data-ttu-id="8b60d-294">Щелкните "Сбросить пароль", чтобы назначить временный пароль, который необходимо будет изменить при следующем входе в систему.</span><span class="sxs-lookup"><span data-stu-id="8b60d-294">Click Reset Password to assign a temporary password that must be changed upon the next login.</span></span>
5. <span data-ttu-id="8b60d-295">Щелкните "Отклонить все события", чтобы сбросить оценку риска пользователя.</span><span class="sxs-lookup"><span data-stu-id="8b60d-295">Click Dismiss all events to reset the user’s risk score.</span></span>

<span data-ttu-id="8b60d-296">Теперь пользователь сможет войти в систему, сбросить свой пароль и получить доступ к приложению.</span><span class="sxs-lookup"><span data-stu-id="8b60d-296">The user can now sign in, reset their password, and access the application.</span></span>

## <a name="known-issues"></a><span data-ttu-id="8b60d-297">Известные проблемы</span><span class="sxs-lookup"><span data-stu-id="8b60d-297">Known issues</span></span>

### <a name="exchange-online-powershell"></a><span data-ttu-id="8b60d-298">Exchange Online PowerShell</span><span class="sxs-lookup"><span data-stu-id="8b60d-298">Exchange Online PowerShell</span></span>

<span data-ttu-id="8b60d-299">Если MFA применяется принудительно, партнеры не могут использовать свои делегированные права администратора в службе Exchange Online PowerShell для выполнения действий с клиентами.</span><span class="sxs-lookup"><span data-stu-id="8b60d-299">When MFA is enforced partners will not be able to utilize their delegated administrative privileges with Exchange Online PowerShell to perform actions against their customers.</span></span> <span data-ttu-id="8b60d-300">Дополнительные сведения об этом ограничении см. в статье [Connect to Exchange Online PowerShell using multi-factor authentication](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/mfa-connect-to-exchange-online-powershell) (Подключение к Exchange Online PowerShell с помощью многофакторной проверки подлинности).</span><span class="sxs-lookup"><span data-stu-id="8b60d-300">See [Connect to Exchange Online PowerShell using multi-factor authentication](https://docs.microsoft.com/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/mfa-connect-to-exchange-online-powershell) for more information regarding this limitation.</span></span>

<span data-ttu-id="8b60d-301">Чтобы обойти это ограничение, создайте учетную запись и никогда не используйте ее для интерактивной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8b60d-301">You can work around this limitation by creating a new account and never using it to perform an interactive authentication.</span></span> <span data-ttu-id="8b60d-302">Для создания этой учетной записи и первоначальной настройки рекомендуем использовать [Azure AD PowerShell](https://docs.microsoft.com/powershell/module/azuread/).</span><span class="sxs-lookup"><span data-stu-id="8b60d-302">It is recommended that you leverage [Azure AD PowerShell](https://docs.microsoft.com/powershell/module/azuread/) to create the new account and perform the initial configuration.</span></span> <span data-ttu-id="8b60d-303">Вы можете использовать приведенный ниже сценарий PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8b60d-303">The following PowerShell can be used to create and configure the account</span></span>

```powershell
Import-Module AzureAD
Connect-AzureAD

$PasswordProfile = New-Object -TypeName Microsoft.Open.AzureAD.Model.PasswordProfile

$PasswordProfile.Password = "Password"
$PasswordProfile.ForceChangePasswordNextLogin = $false

$user = New-AzureADUser -DisplayName "New User" -PasswordProfile $PasswordProfile -UserPrincipalName "NewUser@contoso.com" -AccountEnabled $true

# Uncomment the following two lines if you want the account to have Admin Agent privileges
# $adminAgentsGroup = Get-AzureADGroup -Filter "DisplayName eq 'AdminAgents'"
# Add-AzureADGroupMember -ObjectId $adminAgentsGroup.ObjectId -RefObjectId $user.ObjectId
```

<span data-ttu-id="8b60d-304">При следующем подключении к Exchange Online через PowerShell используйте эту учетную запись — она будет работать должным образом.</span><span class="sxs-lookup"><span data-stu-id="8b60d-304">Next time you connect to Exchange Online through PowerShell use this account, it will work as expected.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b60d-305">В дальнейшем партнеры смогут использовать свои делегированные права администратора в службе Exchange Online PowerShell для выполнения действий с клиентами, даже если будет применена проверка подлинности MFA.</span><span class="sxs-lookup"><span data-stu-id="8b60d-305">The ability for partners to utilize their delegated administrative privileges with Exchange Online PowerShell to perform actions against their customers, when MFA is enforced, will be available in the future.</span></span> <span data-ttu-id="8b60d-306">А пока вы можете использовать этот обходной метод.</span><span class="sxs-lookup"><span data-stu-id="8b60d-306">Until then you should leverage this work around.</span></span>

## <a name="resources-and-support"></a><span data-ttu-id="8b60d-307">Ресурсы и поддержка</span><span class="sxs-lookup"><span data-stu-id="8b60d-307">Resources and support</span></span>

<span data-ttu-id="8b60d-308">В сообществе [Консультативная группа по обеспечению безопасности в Центре партнеров](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) вы можете найти дополнительные ресурсы и сведения о предстоящих событиях, таких как рабочие часы технического отдела.</span><span class="sxs-lookup"><span data-stu-id="8b60d-308">Through the [Partner Center Security Guidance Group community](https://www.microsoftpartnercommunity.com/t5/Partner-Center-Security-Guidance/ct-p/partner-center-security-guidance) you can will find additional resources and learn about upcoming events such as technical office hours.</span></span> <span data-ttu-id="8b60d-309">Дополнительные сведения о требованиях см. в статье [Frequently asked questions about the partner security requirements](partner-security-requirements-faq.md) (Часто задаваемые вопросы о требованиях к безопасности для партнеров).</span><span class="sxs-lookup"><span data-stu-id="8b60d-309">See the [frequently asked questions](partner-security-requirements-faq.md) document to learn more about the requirements.</span></span>
